<div layout-align="start start" style="max-width: 100%;height:100%;box-sizing:border-box;" layout-padding>


  <div class="page-title">
    <div class="md-display-1 item-title">{{adv.pageHeader}}
    </div>
  </div>

  <md-card class="main-card md-hue-1" style="max-width:100%;" md-colors="::{background: 'default-background-50'}">

    <md-card-content>

      <div layout="column" class="discoveryMessages" layout-padding>


          <form name="discoveryForm" class="discover-form" ng-submit="adv.submit(disc.terms)">

            <md-input-container class="md-block" flex-gt-sm="70">
              <label>{{adv.textLabel}}</label>
              <input ng-model="adv.terms" required name="terms" title="search terms">
              <div class="hint">Search term is required.</div>
            </md-input-container>
            <div>
              <md-input-container class="halfer">
                <label class="md-no-sticky">{{adv.communityLabel}}</label>
                <md-select ng-model="adv.communityId" ng-change="adv.selectCommunity()">
                  <md-option class="md-2-line" ng-repeat="item in adv.communityItems" value="{{item.id}}">
                    <div class="md-list-item-text" layout="column">
                      <div class="md-subhead">{{ item.name }}</div>
                    </div>
                  </md-option>
                </md-select>
              </md-input-container>
            </div>
            <div ng-if="adv.communityId > 0">
              <md-input-container class="halfer">
                <label class="md-no-sticky">{{adv.collectionLabel}}</label>
                <!-- Using the model trackBy option so that select will refresh when new community is selected.
                     https://material.angularjs.org/latest/api/directive/mdSelect -->
                <md-select ng-model="adv.selectedCollection" ng-model-options="{trackBy: '$value.id'}" >
                  <md-option ng-value="item" class="md-2-line" ng-repeat="item in adv.collections" ng-click="adv.selectCollection(item.id)">
                    <div class="md-list-item-text" layout="column">
                      <div class="md-subhead">{{ item.name }}</div>
                    </div>
                  </md-option>
                </md-select>
              </md-input-container>
            </div>

            <md-input-container flex-gt-sm="20">
              <md-button class="md-raised md-accent" ng-click="adv.submit()">{{adv.submitLabel}}</md-button>
            </md-input-container>

          </form>

        </div>

        <item-list-component flex="100" ng-if="!adv.hideComponents" layout-fill class="list-width" context="{{adv.context}}"></item-list-component>


    </md-card-content>

  </md-card>


</div>




